<!DOCTYPE html>
<html lang="en">
<head>
    <script src="trackPlayerInputs.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Summary</title>
    <link rel="stylesheet" href="index.css">
    <style>
        /* Add some styles for the summary page */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        /* Flexbox styles to center content */
        body {
            display: flex;
            justify-content: center;  /* Center horizontally */
            margin-top: 300px;
            min-height: 100vh;            /* Full viewport height */
            font-family: Arial, sans-serif;
            font-size: 22px;
        }

        #countdown {
      font-size: 18px;
      font-weight: bold;
      margin: 0;
      position: absolute;
      bottom: 25%;  /* Position at the bottom of the page */
      left: 50%;  /* Center it horizontally */
      transform: translateX(-50%);  /* Adjust for exact horizontal centering */
    }

    #time-elapsed {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 18px;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
    }

    </style>
</head>
<body>

    <div class="wrapper">
        <b><u>Game Summary</u></b>
        <p id="summary-text"></p>
        <!--<p>Partner's score: 40 (lines cleared: 4)</p>-->
        <p id="partner-score"></p> 
      
       
        <p><u>Message received:</u> <i><b class="red-text"> Your partner gives you a thumbs up!</b></i></p>
        <br><br>

        <div id="countdown">Next page loads in 10 seconds</div>
    </div>



    <!--<h1>Game Summary</h1>
    <p id="summary-text"></p>-->

    <script>


let countdownValue = 10;
const countdownElement = document.getElementById('countdown');



        // Get the current page URL parameters
        const urlParams = new URLSearchParams(window.location.search);

        // Retrieve the score and lines values
        const score = urlParams.get('score');
        const lines = urlParams.get('lines');
        const loopCount = parseInt(urlParams.get('loopCount')); 

        // Display the score and lines in the summary
        const summaryText = document.getElementById('summary-text');
        summaryText.innerHTML = `Your score: ${score} (lines cleared: ${lines})`;

        setTimeout(() => {
            //window.location.href = `calculation.html?score=${score}&lines=${lines}`;
            //window.location.href = `calculation.html?loopCount=${loopCount}&score=${score}&lines=${lines}` 
            window.location.href = `reinforce.html?loopCount=${loopCount}&score=${score}&lines=${lines}` 
        }, 10000); // Delay of 3 seconds before redirecting (adjust the time as necessary)





// Define the array with the dynamic values for each loop (partner's score)
const partnerScores = [40, 20, 20, 300, 20, 110, 30, 30];  // Partner's score for each loop
const partnerLines = [4, 2, 2, 3, 2, 3, 3, 3];  // Lines cleared for each loop (you can adjust this based on your logic)

// Get the partner's score and lines cleared based on the current loop count (adjusting for zero-based index)
let partnerScore = partnerScores[loopCount - 2];  // loopCount - 1 because arrays are zero-based
let linesCleared = partnerLines[loopCount - 2];   // Adjust similarly for lines cleared

// Update the HTML content for the partner's score and lines cleared
document.getElementById("partner-score").textContent = `Partner's score: ${partnerScore} (lines cleared: ${linesCleared})`;

// Optional: If you want to display this in a specific section for the game summary, ensure your HTML contains an element like this:
// <p id="partner-score"></p> 









          // Countdown function
          function startCountdown() {
            const countdownInterval = setInterval(() => {
                if (countdownValue > 0) {
                    countdownValue--;
                    countdownElement.textContent = `Next page loads in: ${countdownValue} seconds`;
                }
            }, 1000);
        }

        // Start countdown
        startCountdown();

    </script>

</body>
</html>
